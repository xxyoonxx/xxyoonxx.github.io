---
layout: post
title: spring16
sitemap: false
hide_last_modified: true
---
# @Component와 @Bean

* toc
{:toc .large-only}

Spring 프레임워크에서 `@Component`와 `@Bean`은`빈`을 등록하는 기능을 갖고 있지만 뚜렷한 차이점이 있다.

# @Component

- Spring이 `자동으로 감지해서 빈으로 등록`
- Spring 컨테이너에서 관리
- `@Service`, `@Repository`, `@Controller` 는 `@Component` 를 확장한 어노테이션

## 사용 위치

- 클래스 단위로 적용
- `@ComponentScan`이 적용된 패키지 내에 있어야 자동 감지 가능

## 사용 예시

- 개발자가 직접 작성한 클래스를 빈으로 등록 할 때 (`@Controller`, `@Service` 등)

# @Bean

- 개발자가 `직접 빈을 등록`할 때 사용하는 어노테이션
- XML의 `<bean>`과 같은 역할

## 사용 위치

- 메서드 단위로 적용
- `@Configuration` 클래스의 메서드
- `@ComponentScan` 가 적용된 `@Component` 클래스의 메서드
    - Spring컨테이너(Spring Context)가 관리하는 객체가 아니므로 `내부 메서드 호출 시` 단순 메서드 호출로 간주되어 싱글톤이 보장되지 않음
        - `@Configuration` + `@Bean` 조합
        
        ```java
        @Configuration
        public class AppConfig {
            
            @Bean
            public MyService myService() {
                System.out.println("MyService 인스턴스 생성!");
                return new MyService();
            }
        
            @Bean
            public AnotherService anotherService() {
                return new AnotherService(myService());  // 같은 인스턴스를 사용
            }
        }
        ```
        
        ```
        -- 출력값
        MyService 인스턴스 생성!
        ```
        
        - `@Component` + `@Bean` 조합 - 내부 메서드 직접 호출
        
        ```java
        @Component
        public class MyComponent {
            
            @Bean
            public MyService myService() {
                System.out.println("MyService 인스턴스 생성!");
                return new MyService();
            }
        
            @Bean
            public AnotherService anotherService() {
                return new AnotherService(myService());
            }
        }
        ```
        
        ```
        -- 출력값
        MyService 인스턴스 생성!
        MyService 인스턴스 생성!
        ```
        
        - `@Component` + `@Bean` 조합 - DI
        
        ```java
        @Component
        public class MyComponent {
            
            @Bean
            public MyService myService() {
                System.out.println("MyService 인스턴스 생성!");
                return new MyService();
            }
        
            @Bean
            public AnotherService anotherService(MyService myService) { 
                return new AnotherService(myService); // 직접 호출 X → 싱글톤 유지
            }
        }
        
        ```
        
        ```
        -- 출력값
        MyService 인스턴스 생성!
        ```
        

## 사용 예시

- 외부 라이브러리 객체를 빈으로 등록 할 때
- 생성자나 팩토리 메서드를 통해 빈을 생성해야 할 때
