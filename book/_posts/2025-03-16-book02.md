---
layout: post
title: book02
description: >
  <a href="https://product.kyobobook.co.kr/detail/S000001628109">객체지향의 사실과 오해</a><br>
sitemap: false
hide_last_modified: true
---
# 가상 면접 사례로 배우는 대규모 시스템 설계 기초 - 알렉스 쉬

* toc
{:toc .large-only}


![](/assets/img/book/2.PNG)

### CAP 정리 - 키-값 저장소 설계

- 데이터 일관성, 가용성, 파티션 감내 세 가지 요구사항을 동시에 만족 시킬 수 없음
    - 데이터 일관성: 클라이언트는 어떤 노드에 접속하든 항상 같은 데이터를 조회 할 수 있어야함
        - 은행
    - 가용성: 클라이언트는 일부 노드에 장애가 발생하더라도 항상 응답을 받을 수 있어야함
        - SNS
    - 파티션 감내: 네트워크에 파티션이 생기더라도 시스템은 계속 동작해야함  
      - 파티션:  CAP 정리에서 파티션은 두 노드 사이의 통신 장애를 뜻한다.

### 일관성 모델 - 키-값 저장소 설계
- 강한 일관성: 모든 읽기 연산은 가장 최근에 갱신된 결과 반환
- 약한 일관성: 읽기 연산은 가장 최근에 갱신된 결과를 반환하지 못할 수 있음
- 최종 일관성: 갱신 결과가 일정 시간이 지나면 데이터가 동일하게 정리되는 방식

### 트위터 스노플레이크 - 분산 시스템을 위한 유일 ID 생성기 설계
- ID에 할당 된 64비트를 5개의 절(section)으로 분할
    - 사인: 음수 양수 구분
    - 타임스탬프: 특정 날짜를 시작 기준으로 잡고(기원시각) 얼마나 경과했는지 밀리초로 나타냄
    - 데이터센터 ID
    - 서버 ID
    - 일련번호: 각 서버에서 ID를 생성 할 때마다 1만큼 증가 시키며, 1밀리초 경과 시마다 0으로 초기화
- 같은 타임스탬프일 경우, 데이터센터 ID → 서버 ID → 시퀀스 번호 순으로 정렬

### 키-값 저장소의 장점 - 채팅 시스템 설계

- 키-값 저장소: 채팅 이력 데이터 저장
    - 수평적 규모 확장 유리
    - 롱테일 데이터 접근에 유리
      - 롱테일: 자주 조회되지는 않지만 많은 부분을 차지하고 있는 데이터
    - 데이터 접근 지연시간이 낮음