---
layout: post
title: java32
sitemap: false
hide_last_modified: true
---
# DIP

* toc
{:toc .large-only}

- ì •ë³´ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ì¶”ìƒì„±ì´ ë‚®ì€ í´ë˜ìŠ¤ë³´ë‹¤Â ì¶”ìƒì„±ì´ ë†’ì€ í´ë˜ìŠ¤ì™€ í†µì‹ í•˜ëŠ” ê²ƒ
    - ê³ ìˆ˜ì¤€ > ì €ìˆ˜ì¤€ìœ¼ë¡œ ì§ì ‘ ì°¸ì¡°í•˜ì§€ ì•Šê³ , ìƒìœ„ìš”ì†Œ(ì¶”ìƒí´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤)ë¥¼ ì˜ì¡´(ìƒì†)

## ê³ ìˆ˜ì¤€ ëª¨ë“ˆ

- ì‹œìŠ¤í…œì˜ ì£¼ìš” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë‚˜ ì¤‘ìš”í•œ ê¸°ëŠ¥ì„ ë‹´ë‹¹
    - ì‹œìŠ¤í…œì˜ ì „ë°˜ì ì¸ ê¸°ëŠ¥ì„ ì •ì˜í•˜ê³ , ë‹¤ë¥¸ ëª¨ë“ˆë“¤ì— ì˜ì¡´í•˜ë©´ì„œ ì£¼ìš” ë¡œì§ ìˆ˜í–‰
- ì¼ë°˜ì ìœ¼ë¡œ ë†’ì€ ì¶”ìƒí™” ìˆ˜ì¤€ì—ì„œ ë™ì‘
- ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ ë†’ìŒ

## ì €ìˆ˜ì¤€ ëª¨ë“ˆ

- íŠ¹ì •í•œ ì‘ì—…(ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼, íŒŒì¼ ì…ì¶œë ¥ ë“±)ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ êµ¬í˜„ì„ í¬í•¨í•˜ëŠ” ëª¨ë“ˆ
- íŠ¹ì •í•œ ê¸°ìˆ ì  ê³¼ì œë‚˜ í•˜ë“œì›¨ì–´, ë°ì´í„° ì²˜ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰
- êµ¬ì²´ì ì¸ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì´ ë§ì´ í¬í•¨ë¨

## DIPì˜ í•„ìš”ì„±

DIPë¥¼ ì ìš©í•˜ì§€ ì•Šìœ¼ë©´(=ì¶”ìƒí™” ëœ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ì§€ ì•Šìœ¼ë©´) ê³ ìˆ˜ì¤€ì—ì„œ ì €ìˆ˜ì¤€ ì½”ë“œë¥¼ ì§ì ‘ êµ¬í˜„í•´ì•¼í•˜ëŠ”ë°, ì´ ê²½ìš° êµ¬í˜„ê¸°ìˆ ì´ ë‹¬ë¼ì§€ê²Œ ë˜ë©´ ì½”ë“œë¥¼ ì™„ì „íˆ ëœ¯ì–´ê³ ì³ì•¼í•œë‹¤. ì¦‰, ìœ ì§€ë³´ìˆ˜ì„±ê³¼ ìœ ì—°ì„±ì´ ì¢‹ì§€ ëª»í•˜ë‹¤ëŠ” ëœ»ì´ë‹¤.

ê·¸ëŸ¬ë‚˜ ì¶”ìƒí™”ëœ ìš”ì†Œë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê³ ìˆ˜ì¤€ ëª¨ë“ˆì„ ê³ ì¹˜ëŠ” ì¼ ì—†ì´ ì €ìˆ˜ì¤€ ëª¨ë“ˆë§Œ ê°ˆì•„ë¼ìš°ë©´ ë˜ë¯€ë¡œ í›¨ì”¬ ê³µìˆ˜ê°€ ëœí•˜ê²Œ ëœë‹¤.

### ì˜ˆì‹œ

- DIPë¥¼ ì ìš©í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°

```java
// ê³ ìˆ˜ì¤€ ëª¨ë“ˆ
public class OrderProcessor {
    private final EmailNotificationService emailNotificationService;

    // OrderProcessorê°€ êµ¬ì²´ì ì¸ ì €ìˆ˜ì¤€ ëª¨ë“ˆ EmailNotificationServiceì— ì§ì ‘ ì˜ì¡´í•¨
    public OrderProcessor() {
        this.emailNotificationService = new EmailNotificationService();
    }

    public void processOrder(String order) {
        // ì£¼ë¬¸ ì²˜ë¦¬ ë¡œì§
        emailNotificationService.sendNotification("Order processed: " + order);
    }
}

// ì €ìˆ˜ì¤€ ëª¨ë“ˆ (êµ¬ì²´ì  êµ¬í˜„)
public class EmailNotificationService {
    public void sendNotification(String message) {
        System.out.println("Sending email notification: " + message);
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
public class Main {
    public static void main(String[] args) {
        OrderProcessor orderProcessor = new OrderProcessor();
        orderProcessor.processOrder("12345");
    }
}
```

ë§Œì•½ ì•Œë¦¼ ë°©ì‹ì´ Emailì´ ì•„ë‹Œ SMSë‚˜ í‘¸ì‹œë°©ì‹ìœ¼ë¡œ ë³€ê²½ë  ê²½ìš°, ê±°ì˜ ëŒ€ë¶€ë¶„ì˜ ì½”ë“œê°€ ìˆ˜ì •ë˜ì–´ì•¼í•œë‹¤.(ì €ìˆ˜ì¤€ ëª¨ë“ˆì´ êµ¬í˜„ë˜ì–´ì•¼ í•˜ëŠ”ê²ƒì€ ë¬¼ë¡ ì´ë‹¤)

```java
// ê³ ìˆ˜ì¤€ ëª¨ë“ˆ
public class OrderProcessor {
		// ê³ ì³ì•¼í•¨
    private final EmailNotificationService emailNotificationService;

		// ê³ ì³ì•¼í•¨
    // OrderProcessorê°€ êµ¬ì²´ì ì¸ ì €ìˆ˜ì¤€ ëª¨ë“ˆ EmailNotificationServiceì— ì§ì ‘ ì˜ì¡´í•¨
    public OrderProcessor() {
        this.emailNotificationService = new EmailNotificationService();
    }

		// ê³ ì³ì•¼í•¨
    public void processOrder(String order) {
        // ì£¼ë¬¸ ì²˜ë¦¬ ë¡œì§
        emailNotificationService.sendNotification("Order processed: " + order);
    }
}
```

- DIPë¥¼ ì ìš©í•œ ê²½ìš°

```java
// ì¶”ìƒí™”ëœ ì¸í„°í˜ì´ìŠ¤ (ê³ ìˆ˜ì¤€ê³¼ ì €ìˆ˜ì¤€ ëª¨ë“ˆ ì‚¬ì´ì˜ ê³„ì•½)
public interface NotificationService {
    void sendNotification(String message);
}

// ê³ ìˆ˜ì¤€ ëª¨ë“ˆ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ê³  ìˆìŒ)
public class OrderProcessor {
    private final NotificationService notificationService;

    public OrderProcessor(NotificationService notificationService) {
        this.notificationService = notificationService;
    }

    public void processOrder(String order) {
        notificationService.sendNotification("Order processed: " + order);
    }
}

// ì €ìˆ˜ì¤€ ëª¨ë“ˆ (êµ¬ì²´ì ì¸ êµ¬í˜„)
public class EmailNotificationService implements NotificationService {
    @Override
    public void sendNotification(String message) {
        System.out.println("Sending email notification: " + message);
    }
}
```

ì´ ê²½ìš° ê³ ìˆ˜ì¤€ ëª¨ë“ˆì´ ì¶”ìƒí™”ëœ í´ë˜ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë³„ë„ì˜ ìˆ˜ì • ì—†ì´ ì €ìˆ˜ì¤€ ëª¨ë“ˆë§Œ êµ¬í˜„í•´ì£¼ë©´ ëœë‹¤. ì €ìˆ˜ì¤€ ëª¨ë“ˆì´ ë¯¸êµ¬í˜„ ìƒíƒœì—¬ë„ ì¶”ìƒí™” í´ë˜ìŠ¤ë§Œìœ¼ë¡œ ëŒ€ì—­ ê°ì²´ë¥¼ ì´ìš©í•´ í…ŒìŠ¤íŠ¸ê¹Œì§€ ì§„í–‰ í•  ìˆ˜ ìˆë‹¤.

## ì£¼ì˜ì‚¬í•­

ì¶”ìƒí´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤(ì´í•˜ ì¸í„°í˜ì´ìŠ¤)ê°€ ì¸í”„ë¼ ê³„ì¸µì— ì¡´ì¬í•´ì„  ì•ˆëœë‹¤. ì—¬ê¸°ì„œ ì¸í„°í˜ì´ìŠ¤ê°€ ì¸í”„ë¼ ê³„ì¸µì— ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì€, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì•„ë‹Œ ë‹¨ìˆœíˆ ê¸°ìˆ ì ì¸ ì„¸ë¶€ì‚¬í•­ì„ ì¶”ìƒí™” í•œ ê²ƒì„ ëœ»í•œë‹¤. ê¸°ìˆ ì ì¸ ì„¸ë¶€ì‚¬í•­ì„ ì¶”ìƒí™”í•˜ì—¬ ê³ ëª¨ë“ˆì—ì„œ ë…¸ì¶œí•˜ê²Œ ë˜ë©´ êµ¬ì²´ì ì¸ êµ¬í˜„ì´ ë…¸ì¶œë˜ëŠ” ê²ƒì´ê³ , ì´ëŠ” DIPê°€ ê°€ì§„ ì¥ì ì¸ ìœ ì—°ì„±ê³¼ ë„ë©”ì¸ ë¡œì§ ë³´í˜¸ë¥¼ í™œìš© í•  ìˆ˜ ì—†ê²Œ ëœë‹¤.

- ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¸í”„ë¼ ê³„ì¸µì— êµ¬í˜„í•œ ì˜ˆì‹œ

```java
// ì¸í”„ë¼ ê³„ì¸µì— ìœ„ì¹˜í•œ RuleEngine ì¸í„°í˜ì´ìŠ¤
package com.example.infrastructure.rules;

public interface RuleEngine {
    void initializeEngine();
    void loadRules(String rulesFile);
    <T> T executeRules(Object inputData);
}

package com.example.infrastructure.rules;

import org.kie.api.runtime.KieContainer;
import org.kie.api.runtime.KieSession;

public class DroolsRuleEngine implements RuleEngine {
    private KieContainer kieContainer;
    private KieSession kieSession;

    @Override
    public void initializeEngine() {
        // Drools ì—”ì§„ ì´ˆê¸°í™” ë¡œì§
        kieContainer = ...; // Drools KieContainer ì´ˆê¸°í™”
        kieSession = kieContainer.newKieSession();
    }

    @Override
    public void loadRules(String rulesFile) {
        // ê·œì¹™ íŒŒì¼ì„ ë¡œë“œí•˜ì—¬ Droolsì— ì„¤ì •
        kieSession.insert(rulesFile);
    }

    @Override
    public <T> T executeRules(Object inputData) {
        // Drools ì—”ì§„ì—ì„œ ê·œì¹™ ì‹¤í–‰
        kieSession.insert(inputData);
        kieSession.fireAllRules();
        return (T) inputData; // ì˜ˆì‹œë¡œ, ì²˜ë¦¬ëœ inputData ë°˜í™˜
    }
}
```

ì´ ê²½ìš° RuleEngineì„ Serviceì—ì„œ ì°¸ì¡°í•˜ê³  ìˆë‹¤ê°€ ë‹¤ë¥¸ ê¸°ìˆ ë¡œ ë³€ê²½í•˜ë©´ Serviceë‹¨ì˜ ê´€ë ¨ ë¡œì§ë“¤ì„ ì „ë¶€ ë°”ê¿”ì•¼í•˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

- ì¸í„°í˜ì´ìŠ¤ë¥¼ ë„ë©”ì¸ ê³„ì¸µì—ì„œ êµ¬í˜„í•œ ì˜ˆì‹œ

```java
// ë„ë©”ì¸ ê³„ì¸µì— ìœ„ì¹˜í•œ RuleEngine ì¸í„°í˜ì´ìŠ¤
package com.example.domain.rules;

public interface RuleEngine {
    Discount calculateDiscount(Order order);
}

// ì¸í”„ë¼ ê³„ì¸µì— ìœ„ì¹˜í•œ DroolsRuleEngine êµ¬í˜„ì²´
package com.example.infrastructure.rules;

import com.example.domain.rules.RuleEngine;
import com.example.domain.model.Order;
import com.example.domain.model.Discount;

public class DroolsRuleEngine implements RuleEngine {

		// í•„ë“œê°’ ìƒëµ

    @Override
    public Discount calculateDiscount(Order order) {
        // Drools ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ í• ì¸ ê³„ì‚° ë¡œì§ êµ¬í˜„
        return new Discount(...); // ì‹¤ì œ í• ì¸ ê³„ì‚° ê²°ê³¼ ë°˜í™˜
    }
    
    // ì¶”ìƒí™”í•˜ì§€ ì•Šê³  ë‚´ë¶€ì—ì„œ êµ¬í˜„
    public void initializeEngine() {
        // Drools ì—”ì§„ ì´ˆê¸°í™” ë¡œì§
        kieContainer = ...; // Drools KieContainer ì´ˆê¸°í™”
        kieSession = kieContainer.newKieSession();
    }
}

```

ì´ë ‡ê²Œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ì¸í„°í˜ì´ìŠ¤ì—ì„œ êµ¬í˜„í•˜ê²Œ ë˜ë©´ ì´í›„ DroolsRuleEngine ê°€ ë³€ê²½ë˜ë”ë¼ë„ ê³ ëª¨ë“ˆì¸ ServiceëŠ” ì–´ë–¤ ìˆ˜ì •ì—†ì´ ê°™ì€ ë©”ì„œë“œë¥¼ ì“¸ ìˆ˜ ìˆë‹¤.

# References

[ğŸ’  ì™„ë²½í•˜ê²Œ ì´í•´í•˜ëŠ” DIP (ì˜ì¡´ ì—­ì „ ì›ì¹™) - ì¸íŒŒ](https://inpa.tistory.com/entry/OOP-%F0%9F%92%A0-%EC%95%84%EC%A3%BC-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-DIP-%EC%9D%98%EC%A1%B4-%EC%97%AD%EC%A0%84-%EC%9B%90%EC%B9%99)
